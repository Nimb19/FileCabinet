Headers exchange

Обменник, который маршрутизирует не по ключевому слову, а по заголовкам в Dictionary<string Key, object Value>.
Настройка нахождения совпадений можно настраиваеть (частичное совпадение, полное)

Например, пересылка сообщений <string Format, object Value>
Есть две очереди в обменнике, первая принимает все сообщения с заголовком Format=Excel, вторая с Format=Pdf


Настройка совпадений задаётся через ключ "x-match":
1. По умолчанию там стоит значение "all" - то есть что бы связать сообщение с очередью нужно что бы и ключи и значения полностью совпали.
2. "any" - частичное совпадение

Особенности:
1. Доп. гибкость
2. Заголовки должны сортироваться в алфавитном порядке перед вычислением значений для маршрутизации сообщения. Накладные расходы на вычисления заголовков. Один из самых медленных типов exchange